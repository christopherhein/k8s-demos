#!/bin/bash

########################
# include the magic
########################
. ../demo-magic/demo-magic.sh

NO_WAIT=false
TYPE_SPEED=40

# hide the evidence
clear

# Put your stuff here
echo "██████╗██████╗ ███████╗ █████╗ ████████╗███████╗     █████╗ ███╗   ███╗ █████╗ ███████╗ ██████╗ ███╗   ██╗
██╔════╝██╔══██╗██╔════╝██╔══██╗╚══██╔══╝██╔════╝    ██╔══██╗████╗ ████║██╔══██╗╚══███╔╝██╔═══██╗████╗  ██║
██║     ██████╔╝█████╗  ███████║   ██║   █████╗      ███████║██╔████╔██║███████║  ███╔╝ ██║   ██║██╔██╗ ██║
██║     ██╔══██╗██╔══╝  ██╔══██║   ██║   ██╔══╝      ██╔══██║██║╚██╔╝██║██╔══██║ ███╔╝  ██║   ██║██║╚██╗██║
╚██████╗██║  ██║███████╗██║  ██║   ██║   ███████╗    ██║  ██║██║ ╚═╝ ██║██║  ██║███████╗╚██████╔╝██║ ╚████║
 ╚═════╝╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝   ╚═╝   ╚══════╝    ╚═╝  ╚═╝╚═╝     ╚═╝╚═╝  ╚═╝╚══════╝ ╚═════╝ ╚═╝  ╚═══╝
                                                                                                           
███████╗██╗  ██╗███████╗     ██████╗██╗     ██╗   ██╗███████╗████████╗███████╗██████╗                      
██╔════╝██║ ██╔╝██╔════╝    ██╔════╝██║     ██║   ██║██╔════╝╚══██╔══╝██╔════╝██╔══██╗                     
█████╗  █████╔╝ ███████╗    ██║     ██║     ██║   ██║███████╗   ██║   █████╗  ██████╔╝                     
██╔══╝  ██╔═██╗ ╚════██║    ██║     ██║     ██║   ██║╚════██║   ██║   ██╔══╝  ██╔══██╗                     
███████╗██║  ██╗███████║    ╚██████╗███████╗╚██████╔╝███████║   ██║   ███████╗██║  ██║                     
╚══════╝╚═╝  ╚═╝╚══════╝     ╚═════╝╚══════╝ ╚═════╝ ╚══════╝   ╚═╝   ╚══════╝╚═╝  ╚═╝"
echo ""
echo ""

pe "cat cluster.yaml"

p "eksctl create cluster -f cluster.yaml --kubeconfig \$KUBECONFIG"

while read -r line 
do 
echo $line
sleep 1
done < logs/eksctl_checks.log

cat logs/eksctl_create_cluster.log
sleep 5

cat logs/eksctl_create_node_groups.log
sleep 5

echo "[✔]  all EKS cluster resource for \"kubecon-demo\" had been created"
sleep 1

while read -r line 
do 
echo $line
sleep 1
done < logs/eksctl_resources.log

pe "kubectl get all --all-namespaces"